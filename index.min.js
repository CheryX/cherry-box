function getTotalWidth(a,t,r,i=0){let n=0;return t.forEach(({text:t,font:e,modifier:o})=>{a.font=(o=null==o?"":o)+` ${r}px `+e,n+=a.measureText(t).width+i}),n-i}function getTotalHeight(o,t,a){let r="";t.forEach(({text:t,font:e})=>{o.font=a+"px "+e,r+=t});t=o.measureText(r);return t.actualBoundingBoxAscent+t.actualBoundingBoxDescent}function textBox(t,e,o,a,r,i,n,l=["middle","center"]){t.save();let s=getTotalWidth(t,i,n);s>a&&(n*=a/s);var f=getTotalHeight(t,i,n);switch(s=getTotalWidth(t,i,n),l[0]){case"top":o+=f;break;case"middle":o+=(f+r)/2;break;case"bottom":o+=r}switch(l[1]){case"center":e+=(a-s)/2;break;case"right":e+=a-s}paintText(t,i,e,o,n),t.restore()}function wrapText(e,t,o,a,r,i,n="left"){e.save();let l=[],s=[],f=i/4;for(var x in r){var h=r[x].text.split(" ");let t=0;for(t in h){var c={color:r[x].color,text:h[t],font:r[x].font,modifier:r[x].modifier,shadow:r[x].shadow};a<getTotalWidth(e,s,i,f)+getTotalWidth(e,[c],i,f)+10&&(l.push(s),s=[]),s.push(c)}}for(var d in l.push(s),l){var T=getTotalWidth(e,l[d],i,f);switch(n){case"center":t+=(a-T)/2;break;case"right":t+=a-T;break;case"justify":var p=getTotalWidth(e,l[d],i);30<(f=(f=(a-p)/(l[d].length-1))<4?4:f)&&(f=10)}paintText(e,l[d],t,o+i*d+i,i,f)}e.restore()}function paintText(i,t,n,l,s,f=0){i.save(),t.forEach(({text:t,color:e,shadow:o,font:a,modifier:r})=>{i.fillStyle=e,i.font=(r=null==r?"":r)+` ${s}px `+a,o?(i.shadowColor=o.color,i.shadowOffsetX=o.offset[0]*s/100,i.shadowOffsetY=o.offset[1]*s/100,i.shadowBlur=o.blur):i.shadowColor="transparent",i.fillText(t,n,l),n+=i.measureText(t).width+f}),i.restore()}export{textBox,getTotalWidth,getTotalHeight,wrapText,paintText};