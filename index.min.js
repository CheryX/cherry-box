function e(e,t,o,s,r,a=0){e.save();for(let l=0;l<t.length;l++)e.fillStyle=t[l].color,null==t[l].modifier&&(t[l].modifier=""),e.font=`${t[l].modifier} ${r}px ${t[l].font}`,t[l].shadow?(e.shadowColor=t[l].shadow.color,e.shadowOffsetX=t[l].shadow.offset[0]*r/100,e.shadowOffsetY=t[l].shadow.offset[1]*r/100,e.shadowBlur=t[l].shadow.blur):e.shadowColor="transparent",e.fillText(t[l].text,o,s),o+=e.measureText(t[l].text).width+a;e.restore()}function t(e,t,o,s=0){let r=0;return t.forEach((({text:t,font:a,modifier:l})=>{null==l&&(l=""),e.font=`${l} ${o}px ${a}`,r+=e.measureText(t).width+s})),r-s}function o(o,s,r,a,l,n,f,c=["middle","center"]){o.save();let i=t(o,n,f);i>a&&(f*=a/i);let h=function(e,t,o){let s="";t.forEach((({text:t,font:r})=>{e.font=o+"px "+r,s+=t}));const r=e.measureText(s);return r.actualBoundingBoxAscent+r.actualBoundingBoxDescent}(o,n,f);switch(i=t(o,n,f),c[0]){case"top":r+=h;break;case"middle":r+=(h+l)/2;break;case"bottom":r+=l}switch(c[1]){case"left":s+=0;break;case"center":s+=(a-i)/2;break;case"right":s+=a-i}e(o,n,s,r,f),o.restore()}function s(o,s,r,a,l,n,f="left"){o.save();let c=n/4,i=[],h=[];for(let e=0;e<l.length;e++){let s=l[e].text.split(" ");for(let r=0;r<s.length;r++){let f=l[e];f.text=s[r],f=JSON.parse(JSON.stringify(f)),t(o,h,n,c)+t(o,[f],n,c)+c>a&&(i.push(h),h=[]),h.push(f)}}i.push(h);for(let l=0;l<i.length;l++){let h=t(o,i[l],n,c);switch(f){case"left":s+=0;break;case"center":s+=(a-h)/2;break;case"right":s+=a-h;break;case"justify":c=(a-t(o,i[l],n))/(i[l].length-1),c<4&&(c=4),c>30&&(c=10)}e(o,i[l],s,r+n*(l+1),n,c)}o.restore()}export{o as textBox,s as wrapText};