function paintText(t,e,o,l,i,n=0){t.save(),e.forEach(({text:e,color:r,shadow:a,font:f,modifier:h})=>{t.fillStyle=r,null==h&&(h=""),t.font=`${h} ${i}px ${f}`,a?(t.shadowColor=a.color,t.shadowOffsetX=a.offset[0]*i/100,t.shadowOffsetY=a.offset[1]*i/100,t.shadowBlur=a.blur):t.shadowColor="transparent",t.fillText(e,o,l),o+=t.measureText(e).width+n}),t.restore()}function getTotalWidth(t,e,o,l=0){let i=0;return e.forEach(({text:e,font:n,modifier:r})=>{null==r&&(r=""),t.font=`${r} ${o}px ${n}`,i+=t.measureText(e).width+l}),i-l}function getTotalHeight(t,e,o){let l="";e.forEach(({text:e,font:i})=>{t.font=o+"px "+i,l+=e});const i=t.measureText(l);return i.actualBoundingBoxAscent+i.actualBoundingBoxDescent}function textBox(t,e,o,l,i,n,r,a=["middle","center"]){t.save();let f=getTotalWidth(t,n,r);f>l&&(r*=l/f);let h=getTotalHeight(t,n,r);f=getTotalWidth(t,n,r),"top"===a[0]&&(o+=h),"bottom"===a[0]&&(o+=i),"middle"===a[0]&&(o+=(h+i)/2),"center"===a[1]&&(e+=l/2-f/2),"right"===a[1]&&(e+=l-f),"left"===a[1]&&(e+=0),paintText(t,n,e,o,r),t.restore()}function wrapText(t,e,o,l,i,n,r="left"){t.save();let a=[],f=[],h=10;for(let e in i){let o=i[e].text.split(" "),r=0;for(r in o){let s={color:i[e].color,text:o[r],font:i[e].font,modifier:i[e].modifier,shadow:i[e].shadow},d=getTotalWidth(t,f,n,h),x=getTotalWidth(t,[s],n,h);d+x+10>l&&(a.push(f),f=[]),f.push(s)}}a.push(f);for(let i in a){let f=getTotalWidth(t,a[i],n,h),s=e;if("center"===r&&(s+=l/2-f/2),"right"===r&&(s+=l-f),"left"===r&&(s+=0),"justify"===r){let e=getTotalWidth(t,a[i],n);h=(l-e)/(a[i].length-1),h<4&&(h=4),h>50&&(h=10)}paintText(t,a[i],s,o+n*i+n,n,h)}t.restore()}export{textBox,getTotalWidth,getTotalHeight,wrapText,paintText};